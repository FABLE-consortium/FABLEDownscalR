% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/id_infra.R
\name{fdr_build_id_maps}
\alias{fdr_build_id_maps}
\title{Build ID infrastructure for plotting (ns_int raster + grid_sf)}
\usage{
fdr_build_id_maps(
  grid_sp,
  ns_map,
  pixel_res_m = .fdr_defaults$pixel_res_m,
  crs_equal_area = .fdr_defaults$crs_equal_area,
  keep_only_ids = NULL,
  touches = TRUE,
  id_col = "id_c"
)
}
\arguments{
\item{grid_sp}{A spatial object representing the grid polygons.
Can be sp::SpatialPolygonsDataFrame, sf object, or terra vector.
Must contain an \code{id_c} column.}

\item{ns_map}{A data.frame/tibble with columns \code{id_c} and \code{ns_int}.}

\item{pixel_res_m}{Raster resolution in meters (e.g. 50000, 10000, 1000).}

\item{crs_equal_area}{EPSG code or CRS string used for rasterization (default 6933).}

\item{keep_only_ids}{Optional vector of ns_int to keep (otherwise keep all).}

\item{touches}{Passed to terra::rasterize(). TRUE makes rasterization more inclusive on borders.}
}
\value{
list(rasterized_layer = SpatRaster, grid_sf = sf, ns_map = ns_map)
}
\description{
Why:
\itemize{
\item Downscaling results are keyed by \code{ns} (character), but rasters store integers.
\item We rasterize the 50km grid (or finer) so every pixel has a stable integer ID (ns_int).
\item We also return an sf grid for plotting borders.
}
}
